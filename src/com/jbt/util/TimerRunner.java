package com.jbt.util;import java.util.List;import java.util.Map;import java.util.concurrent.Executors;import java.util.concurrent.ScheduledExecutorService;import java.util.concurrent.TimeUnit;import javax.websocket.Session;import org.springframework.web.context.ContextLoader;import com.jbt.service.CarMsgInfoService;import net.sf.json.JSONArray;public class TimerRunner implements Runnable {	private int sectorId;	private Session session;	private CarMsgInfoService carMsgInfoService;	public TimerRunner(int sectorId,Session session)	{		this.sectorId = sectorId;		this.session = session;	}	@Override	public void run()  {		// TODO Auto-generated method stub		try {			   carMsgInfoService = (CarMsgInfoService) ContextLoader.getCurrentWebApplicationContext().getBean("CarMsgInfoService");			   List<Map<?, ?>> carList = carMsgInfoService.searchBySnList(sectorId);				   			   String str = JSONArray.fromObject(carList).toString();			   session.getBasicRemote().sendText(str);			      		} catch (Exception e) {			 e.printStackTrace();		}		  	}}