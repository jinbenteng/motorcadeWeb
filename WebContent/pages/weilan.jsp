<%@ page language="java" contentType="text/html; charset=UTF-8"    pageEncoding="UTF-8"%><!DOCTYPE><html><head><meta charset=utf-8><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- 在线地图API --><script type="text/javascript"	src="http://api.map.baidu.com/library/AreaRestriction/1.2/src/AreaRestriction_min.js"></script><script type="text/javascript"	src="http://api.map.baidu.com/api?v=2.0&ak=5eaf319004051778e962d47c4e46bb78"></script><link href="./css/bootstrap.css" rel="stylesheet"><script type="text/javascript"	src="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js"></script><script type="text/javascript"	src="http://api.map.baidu.com/library/GeoUtils/1.2/src/GeoUtils.js"></script><!-- 离线地图API --><!-- <script type="text/javascript" src="./baidumapv2/baidumap_offline_v2_load.js"></script><link rel="stylesheet" type="text/css" href="./baidumapv2/css/baidu_map_v2.css"/> --><script src="./js/jquery-1.8.1.min.js" ></script><title>围栏报警</title><style type="text/css">body,html,#mapContainer {	width: 100%;	height: 100%;	margin: 0;	overflow: hidden;	font-family: "微软雅黑";} #tip {	height: 45px;	width:100px;	background-color: #fff;	padding-left: 10px;	padding-right: 10px;	border: 1px solid #969696;	position: absolute;	font-size: 12px;	right: 120px;	top: 20px;	border-radius: 3px;	line-height: 45px;}#tip input[type='button'] {	margin-left: 10px;	margin-right: 10px;	margin-top: 7px;	background-color: #0D9BF2;	height: 30px;	text-align: center;	line-height: 30px;	color: #fff;	font-size: 12px;	border-radius: 3px;	outline: none;	border: 0;	float: left;}#rule {	height: 45px;	width: 100px;	background-color: #fff;	padding-left: 10px;	padding-right: 10px;	border: 1px solid #969696;	position: absolute;	font-size: 12px;	right: 10px;	top: 20px;	border-radius: 3px;	line-height: 45px;}#rule input[type='button'] {	margin-left: 10px;	margin-right: 10px;	margin-top: 7px;	background-color: #0D9BF2;	height: 30px;	text-align: center;	line-height: 30px;	color: #fff;	font-size: 12px;	border-radius: 3px;	outline: none;	border: 0;	float: right;}</style></head><body><div id="mapContainer"></div><div id="tip"><input id="getRectangle" type="button" value=""	onClick="endEddit()" style="display: none" /> <input id="getCenter"	type="button" value="添加/修改围栏" onClick="edditCircle()" /></div><div id="rule"><input type="button" value="测量距离"	onClick="openrule()" /></div><script type="text/javascript">var map = new BMap.Map("mapContainer");var point,circle;map.centerAndZoom(new BMap.Point(116.404, 39.915), 15);map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放map.addControl(new BMap.NavigationControl());   //缩放按钮function edditCircle() {			document.getElementById('tip').style.width="200px";		document.getElementById('getCenter').value="四边形围栏";		document.getElementById('getRectangle').value="圆形围栏";		document.getElementById('getRectangle').style.background="#0D9BF2";		document.getElementById('getRectangle').style.display="block";}function endEddit(){	if(document.getElementById('getRectangle').value == "保存围栏"){		//submitAction();		alert(1);	}	document.getElementById('tip').style.width="200px";	document.getElementById('getCenter').value="取消围栏";	document.getElementById('getRectangle').value="保存围栏";	document.getElementById('getRectangle').style.background="#FF6347";	map.addEventListener("click", showInfo);		/* if(clickEventFlg==0){		map.addEventListener("click", showInfo);		clickEventFlg=1;	} */}	var styleOptions = {        strokeColor:"red",    //边线颜色。        fillColor:"red",      //填充颜色。当参数为空时，圆形将没有填充效果。        strokeWeight: 3,       //边线的宽度，以像素为单位。        strokeOpacity: 0.8,	   //边线透明度，取值范围0 - 1。        fillOpacity: 0.3,      //填充的透明度，取值范围0 - 1。        strokeStyle: 'solid' //边线的样式，solid或dashed。    };	var drawingManager = new BMapLib.DrawingManager(map, {		//使用鼠标工具需要引入鼠标工具开源库DrawingManager_min.js及样式文件DrawingManager_min.css  		isOpen : true, //是否开启绘制模式  		enableDrawingTool : false, //是否显示工具栏  		drawingToolOptions : {			anchor : BMAP_ANCHOR_TOP_RIGHT, //位置  			offset : new BMap.Size(5, 5) //偏离值		},		circleOptions: styleOptions //圆的样式	});	//绘制圆形	drawingManager.setDrawingMode(BMAP_DRAWING_CIRCLE);	var overlaycomplete = function(e){		drawingManager.close();		//alert(e.overlay.point.lng+","+e.overlay.point.lat);		//alert("半径==="+e.overlay.wa);        circle = e.overlay;        circle.enableEditing();        circle.addEventListener('lineupdate', function(e){        	 console.log(e.target.getCenter().lat+","+e.target.getRadius());        	 point = e.target.getRadius();        });    };    //alert(point.lng);	//添加鼠标绘制工具监听事件，用于获取绘制结果    drawingManager.addEventListener('overlaycomplete', overlaycomplete);		function openrule()	{		var result = confirm("是否保存？");		if(result == true)			{				circle.disableEditing();				drawingManager.open();			}	}</script></body></html>